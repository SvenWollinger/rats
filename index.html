<html>
    <head>
        <link rel="stylesheet" href="css/style.css">
        <link rel="icon" href="img/favicon.webp" />
        <title>rats - wollinger.io</title>
    </head>
    <body>
        <h1 style="text-align: center;">My Rattos</h1>
        <div id="content">
            <div id="selectedRatArea" style="width:80%;">
                <p><a href="/">...</a></p>
                <div class="card">
                    <div class="cardInner">
                        <div style="float:left;">
                            <h2 class="ratAboutInfoHeading" id="selectedRatName">Loading...</h2>
                            <h3 class="ratAboutInfoHeading">Born: <span id="selectedRatBorn">Loading...</span></h3>
                            <h3 class="ratAboutInfoHeading" id="selectedRatRBParent">Rainbow Bridge: <span id="selectedRatRB">Loading...</span></h3>
                        </div>
                        <div style="float:left;">
                            <img id="selectedRatBigPic" style="width:50vh" alt="Rat Big Pic" src="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script src="/js/ratloader.js"></script>
    <script>
        let params = new URLSearchParams(window.location.search)
        let validRats = ["miley", "hornet", "zelda", "mochi", "crumb", "cream"]
        let selectedRat = params.get("rat")
        let content = document.getElementById("content")
        if(selectedRat == null) {
            content.innerHTML = `<h1 align="center">All Rattos:</h1>`
            let ratsArea = document.createElement("div")
            validRats.forEach((rat) => {
                loadRat(rat, (ratData) => {
                    let ratArea = document.createElement("div")
                    ratArea.className = "ratPreview"

                    let card = document.createElement("div")
                    card.className = "card"
                    let cardContent = document.createElement("div")
                    cardContent.className = "cardInner"
                    card.appendChild(cardContent)

                    let ratThumbnail = document.createElement("img")
                    ratThumbnail.src = ratData["thumbnail"]
                    ratThumbnail.className = "ratThumbnail"
                    ratThumbnail.onclick = () => {
                        window.location = "/?rat=" + rat
                    }
                    cardContent.appendChild(ratThumbnail)

                    let ratTitle = document.createElement("h1")
                    ratTitle.innerText = ratData["name"]
                    if(ratData["rainbow_bridge"] != null) ratTitle.innerText += " â€ "
                    ratTitle.align = "center"
                    ratTitle.style.color = "black"
                    cardContent.appendChild(ratTitle)

                    ratArea.appendChild(card)
                    ratsArea.appendChild(ratArea)
                })
            })
            content.appendChild(ratsArea)
        } else {
            if(validRats.includes(selectedRat)) {
                loadRat(selectedRat, (ratData) => {
                    document.getElementById("selectedRatName").innerText = ratData["name"]
                    document.getElementById("selectedRatArea").style.display = "block"
                    document.getElementById("selectedRatBigPic").src = ratData["bigPic"]
                    document.getElementById("selectedRatBorn").innerText = ratData["born"]
                    let rbData = ratData["rainbow_bridge"]
                    if(rbData != null)
                        document.getElementById("selectedRatRB").innerText = rbData
                    else
                        document.getElementById("selectedRatRBParent").style.display = "none"
                })
            } else {
                document.getElementById("content").innerHTML =
                    "<div align='center'><p>Rat not found!</p>" +
                    "<a href='/'>Go back?</a></div>"
            }
        }
    </script>
</html>